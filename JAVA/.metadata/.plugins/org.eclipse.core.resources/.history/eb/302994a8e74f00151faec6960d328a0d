package model.featureselection;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

import model.LabelStore;

public class LabelSelectionFromFile implements ILabelSelection {

	private ArrayList<ArrayList<Integer>> labels = new ArrayList<ArrayList<Integer>>();
	private ArrayList<Float> featuresWeights;
	private LabelStore ls;
	private String fileName;
	
	
	
	public LabelSelectionFromFile(String fileName) throws FileNotFoundException {
		super();
		this.fileName = fileName;
		featuresWeights = new ArrayList<Float>();
		labels = new ArrayList<ArrayList<Integer>>();
		ls = new LabelStore();
		readAndFill();
	}
	private void readAndFill() throws FileNotFoundException {
		Scanner sc = new Scanner(new File(fileName));
		String line;
		boolean first = true;
		int i=0;
		ArrayList<Integer> labelRead = new ArrayList<Integer>();
		String[] tabLine;
		while (sc.hasNextLine()) {
			line = sc.nextLine();
			//If this, then the line describes a new cluster
			if (line.startsWith("G")) {
				if (first) {
					first=false;
				}
				else {
					labels.add(labelRead);
					labelRead = new ArrayList<Integer>();
				}
			}
			else {
				tabLine=line.split("\t");
				labelRead.add(i);
				ls.addLabel(tabLine[1]);
				featuresWeights.add(Float.parseFloat(tabLine[2]));
				i++;
			}
		}
		labels.add(labelRead);
		sc.close();
	}

	@Override
	public ArrayList<Integer> getPrevalentFeatureSet(int cluster) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public ArrayList<String> getLabelSet(int cluster) {
		return labels.get(clsuter);
	}

	@Override
	public int getNbCluster() {
		return labels.size();
	}

	@Override
	public String getLabelOfCol(int j) {
		return ls.getLabel(j);
	}

	@Override
	public int getIndexOfColLabel(String label) {
		return ls.getIndexOfLabel(label);
	}

	@Override
	public float getFeatureFMeanValue(int f) {
		return featuresWeights.get(f);
	}

}
